watch:
  default:
    before:
      - 'test/fixtures/tasks/bs.js'
    '*.json': ['test/fixtures/tasks/error.js', 'test/fixtures/tasks/observable.js']

tasks:

  test:
    - compile
    - ci

  ci@p:
    - lint
    - unit

  compile: >
    @npm tsc
    src/**/*.ts
    --module commonjs
    --outDir dist

  lint:   '@npm eslint lib'
  unit:   '@npm mocha test'

  sleep1: '@npm sleep 1'
  sleep2: '@npm sleep 1'

  timeout: '@npm node test/fixtures/tasks/timeout.js'
  timeout-error@p:
    - '@npm node test/fixtures/tasks/timeout-error.js'
    - '@npm node test/fixtures/tasks/simple.js'

  slow-stream: 'test/fixtures/tasks/slow-stream.js'
